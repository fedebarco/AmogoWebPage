---
const { currentLocale } = Astro.url.pathname.startsWith('/en') ? { currentLocale: 'en' } : { currentLocale: 'es' };
const switchToLocale = currentLocale === 'en' ? '' : 'en';
const switchToLabel = currentLocale === 'en' ? 'Espa√±ol' : 'English';

// Get the current path without the language prefix
const currentPath = Astro.url.pathname.replace(/^\/(en\/)?/, '');
const newPath = switchToLocale ? `/${switchToLocale}/${currentPath}` : `/${currentPath}`;
---

<button
  class="language-switcher"
  onclick={`window.location.href = '${newPath}'`}
>
  {switchToLabel}
</button>

<style>
  .language-switcher {
    position: fixed;
    top: 1rem;
    right: 1rem;
    padding: 0.5rem 1rem;
    background-color: #4a5568;
    color: white;
    border: none;
    border-radius: 0.375rem;
    cursor: pointer;
    font-size: 0.875rem;
    transition: background-color 0.2s;
  }

  .language-switcher:hover {
    background-color: #2d3748;
  }
</style> 